var ReactInit=(function(i){"use strict";async function l(e=5e3){if(typeof window<"u"&&window.request||window.buildApiUrl)return;const n=Date.now();for(;typeof window<"u"&&!window.request&&!window.buildApiUrl;){if(Date.now()-n>e){console.warn(`等待 request.global.js 初始化超时（${e}ms），继续执行`);break}await new Promise(o=>setTimeout(o,50))}typeof window<"u"&&(window.request||window.buildApiUrl)&&console.log("request.global.js 初始化完成")}async function r(e,n){if(typeof window>"u")return fetch(e,n);const o=window;return typeof o.request=="function"?o.request(e,n):fetch(e,n)}async function c(e){if(typeof window>"u")return(await fetch(e)).json();const n=window;try{await l()}catch{}if(n.request&&typeof n.request.get=="function")try{const t=await n.request.get(e);return t&&typeof t=="object"&&"data"in t&&!("success"in t)?t.data:t}catch(t){console.error("使用 window.request 获取配置失败，回退到 fetch:",t)}const o=n.buildApiUrl?n.buildApiUrl(e):e;return(await fetch(o)).json()}function s(){if(typeof window>"u"){console.warn("checkRequestAvailable 仅在浏览器环境中有效");return}const e=window;e.request?console.log("✓ window.request 可用"):console.warn("✗ window.request 不可用"),e.buildApiUrl?console.log("✓ window.buildApiUrl 可用"):console.warn("✗ window.buildApiUrl 不可用"),e.buildStaticUrl?console.log("✓ window.buildStaticUrl 可用"):console.warn("✗ window.buildStaticUrl 不可用"),e.buildWebSocketUrl?console.log("✓ window.buildWebSocketUrl 可用"):console.warn("✗ window.buildWebSocketUrl 不可用"),e.API_BASE_URL?console.log("✓ window.API_BASE_URL:",e.API_BASE_URL):console.warn("✗ window.API_BASE_URL 不可用")}if(typeof window<"u"){const e=window;e.ReactInit?console.log("[ReactInit] 复用已有的全局工具对象"):console.log("[ReactInit] 初始化全局工具对象..."),e.ReactInit||(e.ReactInit={}),e.ReactInit.waitForRequestInit=l,e.ReactInit.checkRequestAvailable=s,e.ReactInit.requestWithFallback=r,e.ReactInit.requestJsonWithFallback=c}return i.checkRequestAvailable=s,i.requestJsonWithFallback=c,i.requestWithFallback=r,i.waitForRequestInit=l,Object.defineProperty(i,Symbol.toStringTag,{value:"Module"}),i})({});
